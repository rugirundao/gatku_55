<h1>Products</h1>


<div class="admin-sub-section">

    <div class="button success-bg" ng-hide="editState" ng-click="createProduct()">Create Product</div>
    <div class="button success-bg" ng-show="editState && editingNew" ng-click="saveProduct();">Save</div>
    <div class="button success-bg" ng-show="editState && editingNew === false" ng-click="updateProduct();">Update</div>
    <div class="button error-bg" ng-show="editState" ng-click="reset();">Cancel</div>
    <span ng-show="editState" class="edit-indicator">Editing Product</span>

    <form class="new-product-form" ng-show="editState" ng-cloak>

        <label>Product Type</label>
        <select ng-options="type.id as type.name for type in types" ng-model="newProduct.typeId"></select>
        <br>
        <label>Name</label>
        <input type="text" ng-model="newProduct.name">

        <label>Short Name</label>
        <input type="text" ng-model="newProduct.shortName">

        <label>Mobile Name</label>
        <input type="text" ng-model="newProduct.mobile_name">

        <label>Slug</label>
        <input type="text" ng-model="newProduct.slug">

        <label>Availability</label>
        <select ng-options="availabilityType.id as availabilityType.name for availabilityType in availabilityTypes" ng-model="newProduct.availabilityTypeId"></select>

        <label>Shipping Description [max: 255 characters]</label>
        <input type="text" ng-model="newProduct.shipping_description"></input>

        <label>Description</label>
        <textarea ng-model="newProduct.description"></textarea>

        <label>Meta Description</label>
        <input type="text" ng-model="newProduct.metaDescription">

        <label>Length</label>
        <input type="text" ng-model="newProduct.length">

        <label>Price</label>
        <input type="number" ng-model="newProduct.price">

        <label>Addons</label>
        <table class="table table-striped table-bordered table-sm">
            <thead class="thead-dark">
            <tr>
                <th style="text-align: center"><b>Addon</b></th>
                <th style="text-align: center"><b>Included in package</b></th>
                <th style="text-align: center"><b>Price zero if included in package</b></th>
                </tr>
            </thead>
            <tbody>
            <tr ng-repeat="addon in newProduct.addonSelection" ng-if="editState">
                <td>
                    <div class="new-product-checkbox-container">
                        <input type="checkbox" ng-model="addon.isAddon">&nbsp;<span class="uppercase">{{ addon.name }}</span>
                        </div>
                    </td>
                <td style="text-align: center">
                    <input type="checkbox" ng-model="addon.include_in_package">
                    </td>
                <td style="text-align: center">
                    <input type="checkbox" ng-model="addon.price_zero">
                    </td>
                </tr>
            </tbody>
            </table>

        <label>Attached Image</label>
        <div class="upload-field" ng-style="{'background-image':'url(' + newProduct.attachedImage + ')'}">
            <i class="fa fa-image" ng-hide="newProduct.attachedImage"></i>
            <input type="text" ng-model="newProduct.attachedImage" class="image-path-storage-input">
            <input type="file" ng-file-drop ng-file-select="upload($files, 'attachedImage')">
            </div>

        <label>Detached Image</label>
        <div class="upload-field" ng-style="{'background-image':'url(' + newProduct.detachedImage + ')'}">
            <i class="fa fa-image" ng-hide="newProduct.detachedImage"></i>
            <input type="text" ng-model="newProduct.detachedImage" class="image-path-storage-input">
            <input type="file" ng-file-select="upload($files, 'detachedImage')">
            </div>

        <label>Thumb</label>
        <div class="upload-field" ng-style="{'background-image':'url(' + newProduct.thumb + ')'}">
            <i class="fa fa-image" ng-hide="newProduct.thumb"></i>
            <input type="text" ng-model="newProduct.thumb" class="image-path-storage-input">
            <input type="file" ng-file-select="upload($files, 'thumb')">
            </div>

        <label>Email Image</label>
        <div class="upload-field" ng-style="{'background-image':'url(' + newProduct.emailImage + ')'}">
            <i class="fa fa-image" ng-hide="newProduct.emailImage"></i>
            <input type="text" ng-model="newProduct.emailImage" class="image-path-storage-input">
            <input type="file" ng-file-select="upload($files, 'emailImage')">
            </div>

        <label>Maneuverability</label>
        <input type="text" ng-model="newProduct.maneuverability">

        <label>Trajectory</label>
        <input type="text" ng-model="newProduct.trajectory">

        <label>Balance</label>
        <input type="text" ng-model="newProduct.balance">

        <label>Stealth</label>
        <input type="text" ng-model="newProduct.stealth">
        <label>Product order</label>
        <input type="text" ng-model="newProduct.order"
                   min="0" max="500">
        </form>

    <div class="button success-bg" ng-show="editState && editingNew" ng-click="saveProduct();">Save</div>
    <div class="button success-bg" ng-show="editState && editingNew === false" ng-click="updateProduct();">Update</div>
    <div class="button error-bg" ng-show="editState" ng-click="reset();">Cancel</div>
    <span ng-show="editState" class="edit-indicator">Editing Product</span>

    </div>

<div class="admin-sub-section" ng-hide="editState">

    <div class="order-search">

        <h2>Products</h2>
        <div class="ord-src">
            <label>Start From</label>
            <input style="width: 150px;" class="date-ord-input"; placeholder="<?php echo date('Y-m-d')?>" type="text" ng-model="order_start_date" datepickerstartdate />
            </div>
        <div class="ord-src">
            <label>End To</label>
            <input style="width: 150px;" class="date-ord-input"; placeholder="<?php echo date('Y-m-d')?>" type="text" ng-model="order_end_date" datepickerenddate />
            </div>
        <div class="ord-src">
            <div class="button success-bg" ng-click="getProducts()">Submit</div>
            </div>
        <div class="ord-src" ng-show="order_start_date || order_end_date">
            <div class="button danger-bg" ng-click="resetDateFilter()">Reset range</div>
            </div>
        </div>



    <table class="admin-products-table">
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Stock</th>
            <th>Sold</th>
            <th>Display Order</th>
            <th>Actions (hover)</th>
            </tr>
        <tr ng-repeat="product in products">
            <td class="bold uppercase">{{ product.name }}</td>
            <td class="faded">{{ product.type.name }}</td>
            <td class="faded">{{ product.availability.name }}</td>
            <td class="faded">{{ product.sold | number | customNumber }}</td>
            <td class="faded">{{ product.order }}</td>

            <td>
                <a href="/product/{{ product.slug }}" target="_blank"><div class="button info-bg">View</div></a>
                <div class="button info-bg" ng-click="editProduct(product)">Edit</div>
                <div class="button error-bg">Delete</div>
                </td>
            </tr>
        </table>

    </div>